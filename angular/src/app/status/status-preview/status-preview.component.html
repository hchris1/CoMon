<div class="card border-0" style="cursor: pointer" *ngIf="statusPreview">
  <div
    class="card-header"
    [style.background]="getBackgroundStyle()"
    (click)="openStatusModal()"
  >
    <div class="row justify-content-between">
      <p class="col card-title" style="float: none">
        {{ getEmoji() }} {{ statusPreview.package?.name }}
      </p>
      <p
        class="col text-right card-subtitle text-muted pt-2"
        *ngIf="!editMode && statusPreview.time"
      >
        {{ statusPreview.time.fromNow() }}
      </p>
      <button
        type="button"
        class="col-1 btn btn-circle btn-link"
        (click)="copyClicked()"
        *ngIf="editMode && statusPreview.package?.type === 10"
        tooltip="Copy GUID to clipboard"
      >
        <i class="fa-solid fa-copy"></i>
      </button>
      <button
        type="button"
        class="col-1 btn btn-circle btn-link"
        (click)="editClicked()"
        *ngIf="editMode"
      >
        <i class="fa-solid fa-pencil"></i>
      </button>
      <button
        type="button"
        class="col-1 btn btn-circle btn-link"
        (click)="deleteClicked(deletionTemplate)"
        *ngIf="editMode"
      >
        <i class="fa-solid fa-trash"></i>
      </button>
    </div>
    <div class="row">
      <app-path
        *ngIf="showPath"
        [group]="statusPreview.package.asset?.group"
        [asset]="statusPreview.package.asset"
        class="pl-2 pt-2"
      ></app-path>
    </div>
  </div>
  <!-- <div class="card-body">
    <app-package-timeline-chart
      [packageId]="statusPreview.package.id"
    ></app-package-timeline-chart>
  </div> -->
  <!-- <div class="card-body" (click)="openStatusModal()">
    <div class="container-fluid">
      <div class="row pt-2">
        <div class="col-flex">
          <app-status-message
            *ngFor="let message of statusPreview.messages"
            [message]="message"
          ></app-status-message>
          <app-status-message
            *ngIf="
              statusPreview.messages && statusPreview.messages.length === 0
            "
            [message]="'No messages.'"
          ></app-status-message>
        </div>
      </div>
    </div>
  </div> -->
</div>

<ng-template #deletionTemplate>
  <div class="modal-body">
    <p>{{ "Edit.ConfirmDeletion" | localize }}</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-danger" (click)="confirmDeletion()">
      {{ "Yes" | localize }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="declineDeletion()">
      {{ "No" | localize }}
    </button>
  </div>
</ng-template>
